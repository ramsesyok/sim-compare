## シミュレーションの内容 
- n個のオブジェクトが2チーム別れて動作する 
  - nは、1000程度を想定する。
- 全てのオブジェクトには移動開始時間と経路点(緯度経度)と経路間の速度(km/h)が事前に定められ、時間の経過と共に移動する。 
- 各チームには司令官役と斥候役と伝令役と攻撃役がおり、各チームに司令官は1人、斥候役・伝令役・攻撃役は複数人とする。
- オブジェクトの移動・探知を模擬するのみのシミュレーションとする。
  - 攻撃役は、爆発に関する設定を持つが、現時点ではオブジェクトの破壊は行わない。
  - 斥候役は、通信に関する設定を持つが、現時点で通信を模擬しない。
  - 伝令役は、通信に関する設定を持つが、現時点で通信を模擬しない。
  - 各オブジェクトは、network: 通信経路(利用可能な伝令役)を持つが、現時点で使用しない。

### 斥候役(scout)
- 斥候役は、あらかじめ指定された経路に沿って最終点まで移動する。
- 斥候役は、あらかじめ指定された移動開始時間になるまで、最初の経路点から移動しない。
- 斥候役は、経路を移動中、相手チームのオブジェクトを発見したら、探知イベント（探知時間, 相手オブジェクト識別子, 探知位置）をイベントログに出す。
  - 探知イベントは、最初に探知した時、もしくは失探後、再度探知した時のみで、探知中はイベントログは出力しない。（探知位置のトレースしたログを出さない。）
- 斥候役は、探知していた相手チームのオブジェクトが見つからなくなったら、失探イベント（失探時間, 相手オブジェクト識別子）をイベントログに出す。
  - 失探判定は、前回のサイクルで見つけてたオブジェクトが、現サイクルで見つからなかったら失探とする。
- 斥候の探知範囲はdetect_range_m(m)とし、その範囲にいるオブジェクトを見つける事ができる。


###　伝令役(messenger)
- 伝令役は、あらかじめ指定された経路に沿って最終点まで移動する。
- 伝令役は、あらかじめ指定された移動開始時間になるまで、最初の経路点から移動しない。

### 司令官(commander)
- 司令官役は、あらかじめ指定された位置にいるのみで移動しない。
- 現時点で、司令官は特に何もしない

### 攻撃役(attacker)
- 攻撃役は、あらかじめ指定された経路に沿って移動し、最終点まで移動する。
- 攻撃役は、あらかじめ指定された移動開始時間になるまで、最初の経路点から移動しない。
- 攻撃役は、最終地点に到達したらbom_range_m(m)の爆発を起こす。
　　- 現時点で、爆発をイベントログに残すのみで、他オブジェクトの破壊判定は実装しない。
　　
## 設定(scenario)について
- あらかじめ設定される経路点は緯度(deg)・経度(deg).高度(m)で与えられる。
  - 緯度経度の測地系は、WGS84とする。
- あらかじめ設定される移動開始時間は、0:00からの相対時間とする
- 設定の情報は、jsonファイル形式で与えられる。
  - JSONスキーマ: schemas/scenario.schema.json

## 計算方法や実行条件について
- 全ての位置計算は、緯度経度をECEFに変換した3次元座標系(xyz空間)で行う。
- オブジェクト間の近傍探索にSparial Hashを用いる。
  - Sparial Hashで絞り込みを行い、オブジェクト間の距離とdetect_range_m を比較し、オブジェクト間の距離がdetect_range_mより低かったら探知とする。
- 動き回る領域は日本海上を含む3000km四方とする。
- 計算上の時間間隔は1秒(シミュレーション時間の1秒ごとにオブジェクトが動く) 
  - 1秒は実時間の1秒ではない。シミュレーションの演算はより早く終わる必要があり、1秒はシミュレーション上の時間刻みと考えること。
- 計算範囲は0:00〜24:00の24時間分


## ログファイル
- 全てのオブジェクトの移動は、1つのタイムラインログとして出力する。
  - タイムラインログは、ndjson形式とする。
  - 1行のjsonに、シミュレーション時間と、全てのいオブジェクトの緯度経度高度をまとめる。
    - JSONスキーマ: schemas/timeline.schema.json 
- 全てのオブジェクトで発生したイベントは、1つのイベントログとして出力する。
  - イベントログは、ndjson形式とする。
  - 一行のjsonには、1オブジェクトで発生した1つのイベントを出力する。
    - 探知イベントスキーマ(detection_event): schemas/detection_event.schema.json
    - 爆発イベントスキーマ(detonation_event): schemas/detonation_event.schema.json
